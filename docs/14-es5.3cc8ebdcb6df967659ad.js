(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{Mo3u:function(n,l,e){"use strict";e.r(l);var t=e("CcnG"),u=function(){return function(){}}(),o=e("pMnS"),r=e("oBZk"),a=e("ZZ/e"),i=e("gIcY"),s=e("Ip0R"),c=function(){function n(){}return n.prototype.transform=function(n){for(var l=[],e=1;e<arguments.length;e++)l[e-1]=arguments[e];if(!n)return"0";for(var t=n.toString().split("").reverse().join(""),u="",o=1,r=0,a=t;r<a.length;r++){var i=a[r];u=i+u,o%3==0&&o<t.length&&(u="."+u),o++}return u},n}(),b=e("mrSG"),h=e("EnSQ"),p=e("RANn"),g=function(){function n(n,l,e){this.dataService=n,this.navService=l,this.route=e,this.scores=[],this.shouldScroll=!0,this.isSecondRun=!1}return n.prototype.createNewRound=function(){return b.b(this,void 0,void 0,(function(){var n,l,e,t;return b.e(this,(function(u){switch(u.label){case 0:return this.newRound?(this.game.rounds.push(this.newRound.id),[4,this.dataService.saveRound(this.newRound)]):[3,3];case 1:return u.sent(),[4,this.dataService.saveGame(this.game)];case 2:u.sent(),u.label=3;case 3:for(n=this.rounds.length,l={},e=0,t=this.game.players;e<t.length;e++)l[t[e]]=0;return this.newRound=this.dataService.createNewRound("round "+n,n,l),this.rounds.push(this.newRound),[2]}}))}))},n.prototype.ngAfterContentChecked=function(){this.scrollToBottom()},n.prototype.ngAfterViewChecked=function(){this.scrollToBottom()},n.prototype.ngOnInit=function(){return b.b(this,void 0,void 0,(function(){var n,l,e,t,u,o,r;return b.e(this,(function(a){switch(a.label){case 0:for(n=this.route.snapshot.paramMap.get("id"),this.game=this.dataService.getGame(n),this.gameType=this.dataService.getGameType(this.game.type),this.players=[],this.rounds=[],l=0,e=this.game.players;l<e.length;l++)t=this.dataService.getPlayer(e[l]),this.players.push(t);for(u=0,o=this.game.rounds;u<o.length;u++)r=this.dataService.getRound(o[u]),this.rounds.push(r);return[4,this.createNewRound()];case 1:return a.sent(),this.calculateScores(),[2]}}))}))},n.prototype.onValueChanged=function(n,l,e){return b.b(this,void 0,void 0,(function(){var t,u,o,r,a;return b.e(this,(function(i){switch(i.label){case 0:return t=Number.parseInt(n.target.value,0)||0,l.values[e.id]=t,l!==this.newRound||0===t?[3,2]:[4,this.createNewRound()];case 1:i.sent(),i.label=2;case 2:return[4,this.dataService.saveRounds()];case 3:i.sent(),u=Date.now(),o=0,r=this.game.players,i.label=4;case 4:return o<r.length?((a=this.dataService.getPlayer(r[o])).lastPlayed=u,[4,this.dataService.savePlayer(a)]):[3,7];case 5:i.sent(),i.label=6;case 6:return o++,[3,4];case 7:return this.game.updated=u,[4,this.dataService.saveGame(this.game)];case 8:return i.sent(),this.calculateScores(),[2]}}))}))},n.prototype.calculateScores=function(){for(var n=0,l=this.game.players;n<l.length;n++){for(var e=l[n],t=0,u=0,o=this.rounds;u<o.length;u++)t+=o[u].values[e]||0;this.scores[e]=t}},n.prototype.onKeyPressed=function(n){"Enter"===n.code&&n.target.blur()},n.prototype.onScroll=function(n){var l=n.target.scrollLeft;this.data.nativeElement.scrollLeft=l,this.header.nativeElement.scrollLeft=l,this.footer.nativeElement.scrollLeft=l},n.prototype.getValue=function(n,l){return n.values[l.id]},n.prototype.scrollToBottom=function(){if(this.data&&this.shouldScroll){var n=this.data.nativeElement;n.scrollHeight-n.scrollTop-n.clientHeight==0||(n.scrollTop=n.scrollHeight-n.clientHeight,this.isSecondRun&&(this.shouldScroll=!1,this.isSecondRun=!1),this.isSecondRun=!0)}},n.prototype.endGame=function(){return b.b(this,void 0,void 0,(function(){var n=this;return b.e(this,(function(l){switch(l.label){case 0:return this.game.ended=!this.game.ended,this.getResult().forEach((function(l,e){l.openCount+=n.game.ended?-1:1,0===e?l.winCount+=n.game.ended?1:-1:l.looseCount+=n.game.ended?1:-1})),[4,this.dataService.savePlayers()];case 1:return l.sent(),[4,this.dataService.saveGame(this.game)];case 2:return l.sent(),[2]}}))}))},n.prototype.getResult=function(){var n=this;if(this.players&&this.gameType){var l=[];return l.push.apply(l,this.players),l.sort(this.gameType.winHigh?function(l,e){return n.scores[e.id]-n.scores[l.id]}:function(l,e){return n.scores[l.id]-n.scores[e.id]})}return[]},n.prototype.getWinner=function(){return this.getResult().find((function(){return!0}))},n.prototype.goBack=function(){return b.b(this,void 0,void 0,(function(){return b.e(this,(function(n){switch(n.label){case 0:return[4,this.navService.goBack()];case 1:return n.sent(),[2]}}))}))},n}(),d=e("ZYCi"),f=t.qb({encapsulation:0,styles:[["[_nghost-%COMP%]   .scroll-client-wrapper[_ngcontent-%COMP%], [_nghost-%COMP%]   .scroll-master-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:nowrap;overflow:hidden;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]   .scroll-client-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar, [_nghost-%COMP%]   .scroll-master-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}[_nghost-%COMP%]   .scroll-master-wrapper[_ngcontent-%COMP%]{overflow:auto;flex-direction:column}[_nghost-%COMP%]   .scroll-client-wrapper[_ngcontent-%COMP%]{overflow-x:auto}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]{height:100%}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-data[_ngcontent-%COMP%]{max-height:calc(100% - 64px - 64px)}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-items:center;flex:0 0 auto;height:64px;line-height:64px;font-size:1.2rem;border-bottom:1px solid #2b2b2b}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row.table-row-header[_ngcontent-%COMP%]{height:64px;line-height:64px;font-size:1.2rem;font-weight:700;background-color:#515355}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row.table-row-footer[_ngcontent-%COMP%]{height:64px;line-height:64px;font-size:1.2rem;font-weight:700;background-color:#515355}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row.table-row-data[_ngcontent-%COMP%]:nth-child(2n){background-color:#2b2b2b}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row.table-row-data[_ngcontent-%COMP%]:nth-child(2n-1){background-color:#3c3f41}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]{background-color:inherit;line-height:inherit;border-top:1px solid #2b2b2b;border-left:1px solid #2b2b2b;border-right:none;border-bottom:none;text-align:center;white-space:nowrap;text-overflow:ellipsis;flex:1 0 100px}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]:last-child{border-right:1px solid #2b2b2b}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .table-cell[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{--padding-top:0;--padding-end:0;--padding-bottom:0;--padding-start:0}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .table-cell.table-cell-header[_ngcontent-%COMP%]{height:64px}[_nghost-%COMP%]   .table-wrapper[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .table-cell.table-cell-round[_ngcontent-%COMP%]{flex:0 0 2rem}[_nghost-%COMP%]   .result-row[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:space-between}[_nghost-%COMP%]   .result-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.2rem;line-height:1.2rem;display:block}[_nghost-%COMP%]   .result-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:0 0 50%}[_nghost-%COMP%]   .result-row[_ngcontent-%COMP%]   span.score[_ngcontent-%COMP%]{text-align:right}"]],data:{}});function m(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,6,"ion-buttons",[["slot","end"]],null,null,null,r.D,r.c)),t.rb(1,49152,null,0,a.j,[t.h,t.k,t.z],null,null),(n()(),t.Jb(2,0,[" "," "])),(n()(),t.sb(3,0,null,0,3,"ion-button",[],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.endGame()&&t),t}),r.C,r.b)),t.rb(4,49152,null,0,a.i,[t.h,t.k,t.z],null,null),(n()(),t.sb(5,0,null,0,1,"ion-icon",[["color","warning"],["slot","icon-only"]],null,null,null,r.H,r.g)),t.rb(6,49152,null,0,a.A,[t.h,t.k,t.z],{color:[0,"color"],name:[1,"name"]},null)],(function(n,l){n(l,6,0,"warning",l.component.game.ended?"play":"square")}),(function(n,l){n(l,2,0,l.component.game.ended?"Weiter":"Beenden")}))}function w(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,1,"div",[["class","table-cell table-cell-header"]],null,null,null,null,null)),(n()(),t.Jb(1,null,["",""]))],null,(function(n,l){n(l,1,0,l.context.$implicit.name)}))}function v(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,4,"div",[["class","table-cell table-cell-data table-cell-edit"]],null,null,null,null,null)),(n()(),t.sb(1,0,null,null,3,"ion-input",[["type","number"]],null,[[null,"ionBlur"],[null,"keyup"],[null,"ionChange"]],(function(n,l,e){var u=!0,o=n.component;return"ionBlur"===l&&(u=!1!==t.Db(n,4)._handleBlurEvent(e.target)&&u),"ionChange"===l&&(u=!1!==t.Db(n,4)._handleIonChange(e.target)&&u),"ionBlur"===l&&(u=!1!==o.onValueChanged(e,n.parent.context.$implicit,n.context.$implicit)&&u),"keyup"===l&&(u=!1!==o.onKeyPressed(e)&&u),u}),r.I,r.h)),t.Gb(5120,null,i.b,(function(n){return[n]}),[a.Gb]),t.rb(3,49152,null,0,a.E,[t.h,t.k,t.z],{type:[0,"type"],value:[1,"value"]},null),t.rb(4,16384,null,0,a.Gb,[t.k],null,null)],(function(n,l){n(l,3,0,"number",l.component.getValue(l.parent.context.$implicit,l.context.$implicit))}),null)}function C(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,4,"div",[["class","table-row table-row-data"]],null,null,null,null,null)),(n()(),t.sb(1,0,null,null,1,"div",[["class","table-cell table-cell-data table-cell-round"]],null,null,null,null,null)),(n()(),t.Jb(2,null,["",""])),(n()(),t.hb(16777216,null,null,1,null,v)),t.rb(4,278528,null,0,s.i,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){n(l,4,0,l.component.players)}),(function(n,l){n(l,2,0,l.context.$implicit.idx)}))}function O(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,2,"div",[["class","table-cell table-cell-footer"]],null,null,null,null,null)),(n()(),t.Jb(1,null,["",""])),t.Fb(2,1)],null,(function(n,l){var e=l.component,u=t.Kb(l,1,0,n(l,2,0,t.Db(l.parent.parent,0),e.scores[l.context.$implicit.id]));n(l,1,0,u)}))}function P(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,13,"div",[["class","table-wrapper"]],null,null,null,null,null)),(n()(),t.sb(1,0,[[1,0],["header",1]],null,4,"div",[["class","table-row table-row-header scroll-client-wrapper"]],null,[[null,"scroll"]],(function(n,l,e){var t=!0;return"scroll"===l&&(t=!1!==n.component.onScroll(e)&&t),t}),null,null)),(n()(),t.sb(2,0,null,null,1,"div",[["class","table-cell table-cell-header table-cell-round"]],null,null,null,null,null)),(n()(),t.Jb(-1,null,["#"])),(n()(),t.hb(16777216,null,null,1,null,w)),t.rb(5,278528,null,0,s.i,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.sb(6,0,[[3,0],["data",1]],null,2,"div",[["class","table-data scroll-master-wrapper"]],null,[[null,"scroll"]],(function(n,l,e){var t=!0;return"scroll"===l&&(t=!1!==n.component.onScroll(e)&&t),t}),null,null)),(n()(),t.hb(16777216,null,null,1,null,C)),t.rb(8,278528,null,0,s.i,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null),(n()(),t.sb(9,0,[[2,0],["footer",1]],null,4,"div",[["class","table-row table-row-footer scroll-client-wrapper"]],null,[[null,"scroll"]],(function(n,l,e){var t=!0;return"scroll"===l&&(t=!1!==n.component.onScroll(e)&&t),t}),null,null)),(n()(),t.sb(10,0,null,null,1,"div",[["class","table-cell table-cell-footer table-cell-round"]],null,null,null,null,null)),(n()(),t.Jb(-1,null,["\u2211"])),(n()(),t.hb(16777216,null,null,1,null,O)),t.rb(13,278528,null,0,s.i,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var e=l.component;n(l,5,0,e.players),n(l,8,0,e.rounds),n(l,13,0,e.players)}),null)}function M(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,7,"p",[["class","result-row"]],null,null,null,null,null)),(n()(),t.sb(1,0,null,null,3,"span",[],null,null,null,null,null)),(n()(),t.sb(2,0,null,null,1,"strong",[["class","title"]],null,null,null,null,null)),(n()(),t.Jb(3,null,["",""])),(n()(),t.Jb(-1,null,[" hat gewonnen"])),(n()(),t.sb(5,0,null,null,2,"span",[["class","score"]],null,null,null,null,null)),(n()(),t.Jb(6,null,[""," Punkte"])),t.Fb(7,1)],null,(function(n,l){var e=l.component;n(l,3,0,l.context.$implicit.name);var u=t.Kb(l,6,0,n(l,7,0,t.Db(l.parent.parent,0),e.scores[l.context.$implicit.id]));n(l,6,0,u)}))}function _(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,5,null,null,null,null,null,null,null)),(n()(),t.sb(1,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),t.Jb(2,null,["",". ",""])),(n()(),t.sb(3,0,null,null,2,"span",[["class","score"]],null,null,null,null,null)),(n()(),t.Jb(4,null,[""," Punkte"])),t.Fb(5,1)],null,(function(n,l){var e=l.component;n(l,2,0,l.parent.context.index+1,l.parent.context.$implicit.name);var u=t.Kb(l,4,0,n(l,5,0,t.Db(l.parent.parent.parent,0),e.scores[l.parent.context.$implicit.id]));n(l,4,0,u)}))}function y(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,2,"p",[["class","result-row"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,_)),t.rb(2,16384,null,0,s.j,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,0!==l.context.index)}),null)}function x(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,8,"div",[],null,null,null,null,null)),(n()(),t.sb(1,0,null,null,1,"p",[],null,null,null,null,null)),(n()(),t.Jb(-1,null,["Das Spiel ist beendet."])),(n()(),t.hb(16777216,null,null,1,null,M)),t.rb(4,16384,null,0,s.j,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(5,0,null,null,1,"div",[["flex-center-center",""],["flex-row",""],["style","min-height: 238px;"]],null,null,null,null,null)),(n()(),t.sb(6,0,null,null,0,"img",[["alt","winner gify"],["src","/assets/winner.gif"]],null,null,null,null,null)),(n()(),t.hb(16777216,null,null,1,null,y)),t.rb(8,278528,null,0,s.i,[t.N,t.K,t.s],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var e=l.component;n(l,4,0,e.getWinner()),n(l,8,0,e.getResult())}),null)}function k(n){return t.Lb(0,[t.Eb(0,c,[]),t.Hb(671088640,1,{header:0}),t.Hb(671088640,2,{footer:0}),t.Hb(671088640,3,{data:0}),(n()(),t.sb(4,0,null,null,12,"ion-header",[],null,null,null,r.G,r.f)),t.rb(5,49152,null,0,a.z,[t.h,t.k,t.z],null,null),(n()(),t.sb(6,0,null,0,10,"ion-toolbar",[],null,null,null,r.bb,r.A)),t.rb(7,49152,null,0,a.Ab,[t.h,t.k,t.z],null,null),(n()(),t.sb(8,0,null,0,3,"ion-button",[["fill","none"],["slot","start"]],null,[[null,"click"]],(function(n,l,e){var t=!0;return"click"===l&&(t=!1!==n.component.goBack()&&t),t}),r.C,r.b)),t.rb(9,49152,null,0,a.i,[t.h,t.k,t.z],{fill:[0,"fill"]},null),(n()(),t.sb(10,0,null,0,1,"ion-icon",[["name","arrow-round-back"],["slot","icon-only"]],null,null,null,r.H,r.g)),t.rb(11,49152,null,0,a.A,[t.h,t.k,t.z],{name:[0,"name"]},null),(n()(),t.sb(12,0,null,0,2,"ion-title",[],null,null,null,r.Z,r.y)),t.rb(13,49152,null,0,a.yb,[t.h,t.k,t.z],null,null),(n()(),t.Jb(14,0,["",""])),(n()(),t.hb(16777216,null,0,1,null,m)),t.rb(16,16384,null,0,s.j,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.sb(17,0,null,null,5,"ion-content",[["class","ion-padding"]],null,null,null,r.F,r.e)),t.rb(18,49152,null,0,a.s,[t.h,t.k,t.z],null,null),(n()(),t.hb(16777216,null,0,1,null,P)),t.rb(20,16384,null,0,s.j,[t.N,t.K],{ngIf:[0,"ngIf"]},null),(n()(),t.hb(16777216,null,0,1,null,x)),t.rb(22,16384,null,0,s.j,[t.N,t.K],{ngIf:[0,"ngIf"]},null)],(function(n,l){var e=l.component;n(l,9,0,"none"),n(l,11,0,"arrow-round-back"),n(l,16,0,e.game),n(l,20,0,e.game&&!e.game.ended),n(l,22,0,e.game&&e.game.ended)}),(function(n,l){var e=l.component;n(l,14,0,null==e.game?null:e.game.name)}))}function S(n){return t.Lb(0,[(n()(),t.sb(0,0,null,null,1,"app-game",[],null,null,null,k,f)),t.rb(1,10600448,null,0,g,[h.a,p.a,d.a],null,null)],(function(n,l){n(l,1,0)}),null)}var B=t.ob("app-game",g,S,{},{},[]),R=e("Vu57"),I=e("O2lF"),z=e("uk9C"),N=e("zsqI"),F=e("2nQl"),L=e("6WaA"),J=function(){return function(){}}(),K=e("j1ZV");e.d(l,"GamePageModuleNgFactory",(function(){return G}));var G=t.pb(u,[],(function(n){return t.Ab([t.Bb(512,t.j,t.ab,[[8,[o.a,B,R.a,I.a,z.a,N.a,F.a]],[3,t.j],t.x]),t.Bb(4608,s.l,s.k,[t.u,[2,s.r]]),t.Bb(4608,i.g,i.g,[]),t.Bb(4608,a.a,a.a,[t.z,t.g]),t.Bb(4608,a.Eb,a.Eb,[a.a,t.j,t.q]),t.Bb(4608,a.Ib,a.Ib,[a.a,t.j,t.q]),t.Bb(1073742336,s.b,s.b,[]),t.Bb(1073742336,i.f,i.f,[]),t.Bb(1073742336,i.a,i.a,[]),t.Bb(1073742336,a.Cb,a.Cb,[]),t.Bb(1073742336,d.n,d.n,[[2,d.s],[2,d.m]]),t.Bb(1073742336,J,J,[]),t.Bb(1073742336,K.a,K.a,[]),t.Bb(1073742336,u,u,[]),t.Bb(1024,d.k,(function(){return[[{path:"",component:g,canActivate:[L.a]}]]}),[])])}))}}]);